<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shoe Tracker</title>
<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Shoe Tracker">
<style>
       * {
           box-sizing: border-box;
           font-family: -apple-system, BlinkMacSystemFont, sans-serif;
       }
       body {
           margin: 0;
           background: #000;
           color: #fff;
           padding: 20px;
       }
       h1 {
           text-align: center;
           color: #39ff14;
           letter-spacing: 1px;
           margin-bottom: 24px;
       }
       .card {
           background: #141414;
           border-radius: 18px;
           padding: 18px;
           margin-bottom: 18px;
       }
       label {
           display: block;
           margin-top: 12px;
           font-size: 16px;
           opacity: 0.9;
       }
       input, select {
           width: 100%;
           max-width: 100%;
           margin-top: 8px;
           padding: 14px;
           border-radius: 12px;
           border: none;
           background: #1f1f1f;
           color: #fff;
           font-size: 16px;
       }
       button {
           width: 100%;
           margin-top: 16px;
           padding: 16px;
           border-radius: 14px;
           border: none;
           background: #39ff14;
           color: #000;
           font-size: 18px;
           font-weight: 600;
       }
       .outline-btn {
           background: transparent;
           border: 2px solid #39ff14;
           color: #39ff14;
           padding: 14px;
           font-size: 17px;
           border-radius: 14px;
           margin-bottom: 16px;
       }
       .hidden {
           display: none;
       }
       .shoe-stat {
           margin-top: 14px;
       }
       .shoe-name {
           color: #39ff14;
           font-weight: 600;
           margin-bottom: 4px;
       }
       .settings-btn {
           background: transparent;
           border: 2px solid #39ff14;
           color: #39ff14;
           padding: 14px;
           font-size: 17px;
           border-radius: 14px;
           margin-top: 16px;
       }
       .danger {
           background: #2a0000;
           color: #ff5c5c;
           border: 1px solid #ff5c5c;
       }
</style>
</head>
<body>
<h1>SHOE TRACKER</h1>
<button class="outline-btn" onclick="toggleShoeForm()">+ Dodaj nowe buty</button>
<div id="shoeForm" class="card hidden">
<label>Nazwa butów</label>
<input id="newShoeName" placeholder="np. Nike AlphaFly 3">
<button onclick="addShoe()">Dodaj buty</button>
</div>
<div class="card">
<label>Dystans (km)</label>
<input id="distance" type="number" step="0.01">
<label>Czas (mm:ss)</label>
<input id="time" placeholder="np. 45:30">
<label>Buty</label>
<select id="shoeSelect"></select>
<button onclick="addRun()">Dodaj bieg</button>
</div>
<div class="card">
<h2>Statystyki butów</h2>
<div id="stats"></div>
</div>
<button class="settings-btn" onclick="toggleSettings()">⚙️ Ustawienia</button>
<div id="settings" class="card hidden">
<button class="danger" onclick="resetRuns()">Wyczyść wszystkie biegi</button>
</div>
<script>
   let shoes = JSON.parse(localStorage.getItem("shoes")) || [];
   let runs = JSON.parse(localStorage.getItem("runs")) || [];
   function save() {
       localStorage.setItem("shoes", JSON.stringify(shoes));
       localStorage.setItem("runs", JSON.stringify(runs));
   }
   function toggleShoeForm() {
       document.getElementById("shoeForm").classList.toggle("hidden");
   }
   function toggleSettings() {
       document.getElementById("settings").classList.toggle("hidden");
   }
   function addShoe() {
       const name = document.getElementById("newShoeName").value.trim();
       if (!name) return;
       shoes.push(name);
       document.getElementById("newShoeName").value = "";
       save();
       updateUI();
   }
   function parseTime(str) {
       const parts = str.split(":").map(Number);
       if (parts.length !== 2 || parts.some(isNaN)) return null;
       return parts[0] * 60 + parts[1];
   }
   function formatTime(sec) {
       let s = Math.floor(sec);
       let min = Math.floor(s / 60);
       let hrs = Math.floor(min / 60);
       let days = Math.floor(hrs / 24);
       let months = Math.floor(days / 30);
       s %= 60;
       min %= 60;
       hrs %= 24;
       days %= 30;
       return `${months}m ${days}d ${hrs}h ${min}m ${s}s`;
   }
   function formatPace(secPerKm) {
       const min = Math.floor(secPerKm / 60);
       const sec = Math.round(secPerKm % 60);
       return `${min}:${sec.toString().padStart(2,'0')} min/km`;
   }
   function addRun() {
       const distance = parseFloat(document.getElementById("distance").value);
       const timeStr = document.getElementById("time").value;
       const shoe = document.getElementById("shoeSelect").value;
       const seconds = parseTime(timeStr);
       if (!distance || !seconds || !shoe) return;
       runs.push({ distance, seconds, shoe });
       save();
       updateUI();
       document.getElementById("distance").value = "";
       document.getElementById("time").value = "";
   }
   function resetRuns() {
       if (!confirm("Na pewno usunąć wszystkie biegi?")) return;
       runs = [];
       save();
       updateUI();
   }
   function updateUI() {
       const select = document.getElementById("shoeSelect");
       select.innerHTML = "";
       shoes.forEach(s => {
           const opt = document.createElement("option");
           opt.textContent = s;
           select.appendChild(opt);
       });
       const stats = document.getElementById("stats");
       stats.innerHTML = "";
       shoes.forEach(shoe => {
           const shoeRuns = runs.filter(r => r.shoe === shoe);
           if (!shoeRuns.length) return;
           const totalDist = shoeRuns.reduce((a, r) => a + r.distance, 0);
           const totalTime = shoeRuns.reduce((a, r) => a + r.seconds, 0);
           const avgPace = totalTime / totalDist;
           const div = document.createElement("div");
           div.className = "shoe-stat";
           div.innerHTML = `
<div class="shoe-name">${shoe}</div>
               Dystans: ${totalDist.toFixed(1)} km<br>
               Czas wybiegany: ${formatTime(totalTime)}<br>
               Średnie tempo: ${formatPace(avgPace)}
           `;
           stats.appendChild(div);
       });
   }
   updateUI();
</script>
</body>
</html>
